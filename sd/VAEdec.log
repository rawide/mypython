['sd_perf.py', '2', '1', '4', '30', '512', '512', 'FP16', '1'] 9
create feature latent w/ 0.03MB at DDR
current gm used = 0.00MB, required = 0.03MB, free = 3.97MB
create feature post_quant_conv[OPCONV_output] w/ 0.03MB at GM
---> running post_quant_conv <---
Input  Shape: (1, 4, 64.0, 64.0)
Input   Size: 32.00KB at DDR
Kernel Shape: (4, 4, 1, 1, 1, 1)
Kernel  Size: 0.03KB at DDR
MAC time = 0.13us, ldst time = 1.02us
Output Shape: (1, 4, 64.0, 64.0)
Output  Size: 32.00KB at GM

create feature conv_in[OPCONV_output] w/ 4.00MB at DDR
---> running conv_in <---
Input  Shape: (1, 4, 64.0, 64.0)
Input   Size: 32.00KB at GM
Kernel Shape: (512, 4, 3, 3, 1, 1)
Kernel  Size: 36.00KB at DDR
MAC time = 36.86us, ldst time = 131.35us
Output Shape: (1, 512, 64.0, 64.0)
Output  Size: 4096.00KB at DDR

gm size removed 0.03MB, still remained 0.00MB, free = 4.00MB
removed post_quant_conv[OPCONV_output] w/ 0.03MB from GM
current gm used = 0.00MB, required = 4.00MB, free = 0.00MB
create feature Mid->layer1->ResnetBlock2D->sample conv1[OPCONV_output] w/ 4.00MB at GM
---> running Mid->layer1->ResnetBlock2D->sample conv1 <---
Input  Shape: (1, 512, 64.0, 64.0)
Input   Size: 4096.00KB at DDR
Kernel Shape: (512, 512, 3, 3, 1, 1)
Kernel  Size: 4608.00KB at DDR
MAC time = 2359.30us, ldst time = 276.69us
Output Shape: (1, 512, 64.0, 64.0)
Output  Size: 4096.00KB at GM

create feature Mid->layer1->ResnetBlock2D->sample conv2[OPCONV_output] w/ 4.00MB at DDR
---> running Mid->layer1->ResnetBlock2D->sample conv2 <---
Input  Shape: (1, 512, 64.0, 64.0)
Input   Size: 4096.00KB at GM
Kernel Shape: (512, 512, 3, 3, 1, 1)
Kernel  Size: 4608.00KB at DDR
MAC time = 2359.30us, ldst time = 276.69us
Output Shape: (1, 512, 64.0, 64.0)
Output  Size: 4096.00KB at DDR

gm size removed 4.00MB, still remained 0.00MB, free = 4.00MB
removed Mid->layer1->ResnetBlock2D->sample conv1[OPCONV_output] w/ 4.00MB from GM
current gm used = 0.00MB, required = 4.00MB, free = 0.00MB
create feature Mid->layer1->ResnetBlock2D->sample res add w/ 4.00MB at GM
feature conv_in[OPCONV_output] is stored in DDR, doesn't need remove form GM
feature Mid->layer1->ResnetBlock2D->sample conv2[OPCONV_output] is stored in DDR, doesn't need remove form GM
create feature reshape_to_attn w/ 4.00MB at DDR
gm size removed 4.00MB, still remained 0.00MB, free = 4.00MB
removed Mid->layer1->ResnetBlock2D->sample res add w/ 4.00MB from GM
current gm used = 0.00MB, required = 4.00MB, free = 0.00MB
create feature MidAttn->selfattn_q[OPLINEAR_output] w/ 4.00MB at GM
---> running MidAttn->selfattn_q <---
Input     Shape: (1, 4096.0, 512)
Input      Size: 4096.00KB at DDR
wt_linear Shape: (512, 512)
wt_linear  Size: 512.00KB at DDR
MAC time = 0.00us, ldst time = 146.48us
Output    Shape: (1, 4096.0, 512)
Output     Size: 4096.00KB at GM

create feature MidAttn->selfattn_k[OPLINEAR_output] w/ 4.00MB at DDR
---> running MidAttn->selfattn_k <---
Input     Shape: (1, 4096.0, 512)
Input      Size: 4096.00KB at DDR
wt_linear Shape: (512, 512)
wt_linear  Size: 512.00KB at DDR
MAC time = 0.00us, ldst time = 276.69us
Output    Shape: (1, 4096.0, 512)
Output     Size: 4096.00KB at DDR

create feature MidAttn->setfattn_qkt[OPBMM_output] w/ 32.00MB at DDR
---> running MidAttn->setfattn_qkt <---
Input1 Shape: (1, 4096.0, 512)
Input1  Size: 4096.00KB at GM
Input2 Shape: (1, 512, 4096.0)
Input2  Size: 4096.00KB at DDR
MAC time = 0.00us, ldst time = 1171.88us
Output Shape: (1, 4096.0, 4096.0)
Output  Size: 32768.00KB at DDR

gm size removed 4.00MB, still remained 0.00MB, free = 4.00MB
removed MidAttn->selfattn_q[OPLINEAR_output] w/ 4.00MB from GM
feature MidAttn->selfattn_k[OPLINEAR_output] is stored in DDR, doesn't need remove form GM
current gm used = 0.00MB, required = 4.00MB, free = 0.00MB
create feature MidAttn->selfattn_v[OPLINEAR_output] w/ 4.00MB at GM
---> running MidAttn->selfattn_v <---
Input     Shape: (1, 4096.0, 512)
Input      Size: 4096.00KB at DDR
wt_linear Shape: (512, 512)
wt_linear  Size: 512.00KB at DDR
MAC time = 0.00us, ldst time = 146.48us
Output    Shape: (1, 4096.0, 512)
Output     Size: 4096.00KB at GM

create feature MidAttn->selfattn_score[OPBMM_output] w/ 4.00MB at DDR
---> running MidAttn->selfattn_score <---
Input1 Shape: (1, 4096.0, 4096.0)
Input1  Size: 32768.00KB at DDR
Input2 Shape: (1, 4096.0, 512)
Input2  Size: 4096.00KB at GM
MAC time = 0.00us, ldst time = 1171.88us
Output Shape: (1, 4096.0, 512)
Output  Size: 4096.00KB at DDR

feature MidAttn->setfattn_qkt[OPBMM_output] is stored in DDR, doesn't need remove form GM
gm size removed 4.00MB, still remained 0.00MB, free = 4.00MB
removed MidAttn->selfattn_v[OPLINEAR_output] w/ 4.00MB from GM
current gm used = 0.00MB, required = 4.00MB, free = 0.00MB
create feature MidAttn->selfattn_o[OPLINEAR_output] w/ 4.00MB at GM
---> running MidAttn->selfattn_o <---
Input     Shape: (1, 4096.0, 512)
Input      Size: 4096.00KB at DDR
wt_linear Shape: (512, 512)
wt_linear  Size: 512.00KB at DDR
MAC time = 0.00us, ldst time = 146.48us
Output    Shape: (1, 4096.0, 512)
Output     Size: 4096.00KB at GM

feature MidAttn->selfattn_score[OPBMM_output] is stored in DDR, doesn't need remove form GM
feature reshape_to_attn is stored in DDR, doesn't need remove form GM
create feature Midattn_reshape w/ 4.00MB at DDR
gm size removed 4.00MB, still remained 0.00MB, free = 4.00MB
removed MidAttn->selfattn_o[OPLINEAR_output] w/ 4.00MB from GM
current gm used = 0.00MB, required = 4.00MB, free = 0.00MB
create feature Mid->layer2->ResnetBlock2D->sample conv1[OPCONV_output] w/ 4.00MB at GM
---> running Mid->layer2->ResnetBlock2D->sample conv1 <---
Input  Shape: (1, 512, 64.0, 64.0)
Input   Size: 4096.00KB at DDR
Kernel Shape: (512, 512, 3, 3, 1, 1)
Kernel  Size: 4608.00KB at DDR
MAC time = 2359.30us, ldst time = 276.69us
Output Shape: (1, 512, 64.0, 64.0)
Output  Size: 4096.00KB at GM

create feature Mid->layer2->ResnetBlock2D->sample conv2[OPCONV_output] w/ 4.00MB at DDR
---> running Mid->layer2->ResnetBlock2D->sample conv2 <---
Input  Shape: (1, 512, 64.0, 64.0)
Input   Size: 4096.00KB at GM
Kernel Shape: (512, 512, 3, 3, 1, 1)
Kernel  Size: 4608.00KB at DDR
MAC time = 2359.30us, ldst time = 276.69us
Output Shape: (1, 512, 64.0, 64.0)
Output  Size: 4096.00KB at DDR

gm size removed 4.00MB, still remained 0.00MB, free = 4.00MB
removed Mid->layer2->ResnetBlock2D->sample conv1[OPCONV_output] w/ 4.00MB from GM
current gm used = 0.00MB, required = 4.00MB, free = 0.00MB
create feature Mid->layer2->ResnetBlock2D->sample res add w/ 4.00MB at GM
feature Midattn_reshape is stored in DDR, doesn't need remove form GM
feature Mid->layer2->ResnetBlock2D->sample conv2[OPCONV_output] is stored in DDR, doesn't need remove form GM
create feature UB1->layer1->ResnetBlock2D->sample conv1[OPCONV_output] w/ 4.00MB at DDR
---> running UB1->layer1->ResnetBlock2D->sample conv1 <---
Input  Shape: (1, 512, 64.0, 64.0)
Input   Size: 4096.00KB at GM
Kernel Shape: (512, 512, 3, 3, 1, 1)
Kernel  Size: 4608.00KB at DDR
MAC time = 2359.30us, ldst time = 276.69us
Output Shape: (1, 512, 64.0, 64.0)
Output  Size: 4096.00KB at DDR

create feature UB1->layer1->ResnetBlock2D->sample conv2[OPCONV_output] w/ 4.00MB at DDR
---> running UB1->layer1->ResnetBlock2D->sample conv2 <---
Input  Shape: (1, 512, 64.0, 64.0)
Input   Size: 4096.00KB at DDR
Kernel Shape: (512, 512, 3, 3, 1, 1)
Kernel  Size: 4608.00KB at DDR
MAC time = 2359.30us, ldst time = 406.90us
Output Shape: (1, 512, 64.0, 64.0)
Output  Size: 4096.00KB at DDR

feature UB1->layer1->ResnetBlock2D->sample conv1[OPCONV_output] is stored in DDR, doesn't need remove form GM
create feature UB1->layer1->ResnetBlock2D->sample res add w/ 4.00MB at DDR
gm size removed 4.00MB, still remained 0.00MB, free = 4.00MB
removed Mid->layer2->ResnetBlock2D->sample res add w/ 4.00MB from GM
feature UB1->layer1->ResnetBlock2D->sample conv2[OPCONV_output] is stored in DDR, doesn't need remove form GM
current gm used = 0.00MB, required = 4.00MB, free = 0.00MB
create feature UB1->layer2->ResnetBlock2D->sample conv1[OPCONV_output] w/ 4.00MB at GM
---> running UB1->layer2->ResnetBlock2D->sample conv1 <---
Input  Shape: (1, 512, 64.0, 64.0)
Input   Size: 4096.00KB at DDR
Kernel Shape: (512, 512, 3, 3, 1, 1)
Kernel  Size: 4608.00KB at DDR
MAC time = 2359.30us, ldst time = 276.69us
Output Shape: (1, 512, 64.0, 64.0)
Output  Size: 4096.00KB at GM

create feature UB1->layer2->ResnetBlock2D->sample conv2[OPCONV_output] w/ 4.00MB at DDR
---> running UB1->layer2->ResnetBlock2D->sample conv2 <---
Input  Shape: (1, 512, 64.0, 64.0)
Input   Size: 4096.00KB at GM
Kernel Shape: (512, 512, 3, 3, 1, 1)
Kernel  Size: 4608.00KB at DDR
MAC time = 2359.30us, ldst time = 276.69us
Output Shape: (1, 512, 64.0, 64.0)
Output  Size: 4096.00KB at DDR

gm size removed 4.00MB, still remained 0.00MB, free = 4.00MB
removed UB1->layer2->ResnetBlock2D->sample conv1[OPCONV_output] w/ 4.00MB from GM
current gm used = 0.00MB, required = 4.00MB, free = 0.00MB
create feature UB1->layer2->ResnetBlock2D->sample res add w/ 4.00MB at GM
feature UB1->layer1->ResnetBlock2D->sample res add is stored in DDR, doesn't need remove form GM
feature UB1->layer2->ResnetBlock2D->sample conv2[OPCONV_output] is stored in DDR, doesn't need remove form GM
create feature UB1->layer3->ResnetBlock2D->sample conv1[OPCONV_output] w/ 4.00MB at DDR
---> running UB1->layer3->ResnetBlock2D->sample conv1 <---
Input  Shape: (1, 512, 64.0, 64.0)
Input   Size: 4096.00KB at GM
Kernel Shape: (512, 512, 3, 3, 1, 1)
Kernel  Size: 4608.00KB at DDR
MAC time = 2359.30us, ldst time = 276.69us
Output Shape: (1, 512, 64.0, 64.0)
Output  Size: 4096.00KB at DDR

create feature UB1->layer3->ResnetBlock2D->sample conv2[OPCONV_output] w/ 4.00MB at DDR
---> running UB1->layer3->ResnetBlock2D->sample conv2 <---
Input  Shape: (1, 512, 64.0, 64.0)
Input   Size: 4096.00KB at DDR
Kernel Shape: (512, 512, 3, 3, 1, 1)
Kernel  Size: 4608.00KB at DDR
MAC time = 2359.30us, ldst time = 406.90us
Output Shape: (1, 512, 64.0, 64.0)
Output  Size: 4096.00KB at DDR

feature UB1->layer3->ResnetBlock2D->sample conv1[OPCONV_output] is stored in DDR, doesn't need remove form GM
create feature UB1->layer3->ResnetBlock2D->sample res add w/ 4.00MB at DDR
gm size removed 4.00MB, still remained 0.00MB, free = 4.00MB
removed UB1->layer2->ResnetBlock2D->sample res add w/ 4.00MB from GM
feature UB1->layer3->ResnetBlock2D->sample conv2[OPCONV_output] is stored in DDR, doesn't need remove form GM
create feature UB1->Upsample2Dupinput w/ 16.00MB at DDR
feature UB1->layer3->ResnetBlock2D->sample res add is stored in DDR, doesn't need remove form GM
create feature UB1->Upsample2DUpsample2D[OPCONV_output] w/ 16.00MB at DDR
---> running UB1->Upsample2DUpsample2D <---
Input  Shape: (1, 512, 128.0, 128.0)
Input   Size: 16384.00KB at DDR
Kernel Shape: (512, 512, 3, 3, 1, 1)
Kernel  Size: 4608.00KB at DDR
MAC time = 9437.18us, ldst time = 1188.15us
Output Shape: (1, 512, 128.0, 128.0)
Output  Size: 16384.00KB at DDR

feature UB1->Upsample2Dupinput is stored in DDR, doesn't need remove form GM
create feature UB2->layer1->ResnetBlock2D->sample conv1[OPCONV_output] w/ 16.00MB at DDR
---> running UB2->layer1->ResnetBlock2D->sample conv1 <---
Input  Shape: (1, 512, 128.0, 128.0)
Input   Size: 16384.00KB at DDR
Kernel Shape: (512, 512, 3, 3, 1, 1)
Kernel  Size: 4608.00KB at DDR
MAC time = 9437.18us, ldst time = 1188.15us
Output Shape: (1, 512, 128.0, 128.0)
Output  Size: 16384.00KB at DDR

create feature UB2->layer1->ResnetBlock2D->sample conv2[OPCONV_output] w/ 16.00MB at DDR
---> running UB2->layer1->ResnetBlock2D->sample conv2 <---
Input  Shape: (1, 512, 128.0, 128.0)
Input   Size: 16384.00KB at DDR
Kernel Shape: (512, 512, 3, 3, 1, 1)
Kernel  Size: 4608.00KB at DDR
MAC time = 9437.18us, ldst time = 1188.15us
Output Shape: (1, 512, 128.0, 128.0)
Output  Size: 16384.00KB at DDR

feature UB2->layer1->ResnetBlock2D->sample conv1[OPCONV_output] is stored in DDR, doesn't need remove form GM
create feature UB2->layer1->ResnetBlock2D->sample res add w/ 16.00MB at DDR
feature UB1->Upsample2DUpsample2D[OPCONV_output] is stored in DDR, doesn't need remove form GM
feature UB2->layer1->ResnetBlock2D->sample conv2[OPCONV_output] is stored in DDR, doesn't need remove form GM
create feature UB2->layer2->ResnetBlock2D->sample conv1[OPCONV_output] w/ 16.00MB at DDR
---> running UB2->layer2->ResnetBlock2D->sample conv1 <---
Input  Shape: (1, 512, 128.0, 128.0)
Input   Size: 16384.00KB at DDR
Kernel Shape: (512, 512, 3, 3, 1, 1)
Kernel  Size: 4608.00KB at DDR
MAC time = 9437.18us, ldst time = 1188.15us
Output Shape: (1, 512, 128.0, 128.0)
Output  Size: 16384.00KB at DDR

create feature UB2->layer2->ResnetBlock2D->sample conv2[OPCONV_output] w/ 16.00MB at DDR
---> running UB2->layer2->ResnetBlock2D->sample conv2 <---
Input  Shape: (1, 512, 128.0, 128.0)
Input   Size: 16384.00KB at DDR
Kernel Shape: (512, 512, 3, 3, 1, 1)
Kernel  Size: 4608.00KB at DDR
MAC time = 9437.18us, ldst time = 1188.15us
Output Shape: (1, 512, 128.0, 128.0)
Output  Size: 16384.00KB at DDR

feature UB2->layer2->ResnetBlock2D->sample conv1[OPCONV_output] is stored in DDR, doesn't need remove form GM
create feature UB2->layer2->ResnetBlock2D->sample res add w/ 16.00MB at DDR
feature UB2->layer1->ResnetBlock2D->sample res add is stored in DDR, doesn't need remove form GM
feature UB2->layer2->ResnetBlock2D->sample conv2[OPCONV_output] is stored in DDR, doesn't need remove form GM
create feature UB2->layer3->ResnetBlock2D->sample conv1[OPCONV_output] w/ 16.00MB at DDR
---> running UB2->layer3->ResnetBlock2D->sample conv1 <---
Input  Shape: (1, 512, 128.0, 128.0)
Input   Size: 16384.00KB at DDR
Kernel Shape: (512, 512, 3, 3, 1, 1)
Kernel  Size: 4608.00KB at DDR
MAC time = 9437.18us, ldst time = 1188.15us
Output Shape: (1, 512, 128.0, 128.0)
Output  Size: 16384.00KB at DDR

create feature UB2->layer3->ResnetBlock2D->sample conv2[OPCONV_output] w/ 16.00MB at DDR
---> running UB2->layer3->ResnetBlock2D->sample conv2 <---
Input  Shape: (1, 512, 128.0, 128.0)
Input   Size: 16384.00KB at DDR
Kernel Shape: (512, 512, 3, 3, 1, 1)
Kernel  Size: 4608.00KB at DDR
MAC time = 9437.18us, ldst time = 1188.15us
Output Shape: (1, 512, 128.0, 128.0)
Output  Size: 16384.00KB at DDR

feature UB2->layer3->ResnetBlock2D->sample conv1[OPCONV_output] is stored in DDR, doesn't need remove form GM
create feature UB2->layer3->ResnetBlock2D->sample res add w/ 16.00MB at DDR
feature UB2->layer2->ResnetBlock2D->sample res add is stored in DDR, doesn't need remove form GM
feature UB2->layer3->ResnetBlock2D->sample conv2[OPCONV_output] is stored in DDR, doesn't need remove form GM
create feature UB2->Upsample2Dupinput w/ 64.00MB at DDR
feature UB2->layer3->ResnetBlock2D->sample res add is stored in DDR, doesn't need remove form GM
create feature UB2->Upsample2DUpsample2D[OPCONV_output] w/ 64.00MB at DDR
---> running UB2->Upsample2DUpsample2D <---
Input  Shape: (1, 512, 256.0, 256.0)
Input   Size: 65536.00KB at DDR
Kernel Shape: (512, 512, 3, 3, 1, 1)
Kernel  Size: 4608.00KB at DDR
MAC time = 37748.74us, ldst time = 4313.15us
Output Shape: (1, 512, 256.0, 256.0)
Output  Size: 65536.00KB at DDR

feature UB2->Upsample2Dupinput is stored in DDR, doesn't need remove form GM
create feature UB3->layer1->ResnetBlock2D->sample conv1[OPCONV_output] w/ 32.00MB at DDR
---> running UB3->layer1->ResnetBlock2D->sample conv1 <---
Input  Shape: (1, 512, 256.0, 256.0)
Input   Size: 65536.00KB at DDR
Kernel Shape: (256, 512, 3, 3, 1, 1)
Kernel  Size: 2304.00KB at DDR
MAC time = 18874.37us, ldst time = 3198.24us
Output Shape: (1, 256, 256.0, 256.0)
Output  Size: 32768.00KB at DDR

create feature UB3->layer1->ResnetBlock2D->sample conv2[OPCONV_output] w/ 32.00MB at DDR
---> running UB3->layer1->ResnetBlock2D->sample conv2 <---
Input  Shape: (1, 256, 256.0, 256.0)
Input   Size: 32768.00KB at DDR
Kernel Shape: (256, 256, 3, 3, 1, 1)
Kernel  Size: 1152.00KB at DDR
MAC time = 9437.18us, ldst time = 2119.95us
Output Shape: (1, 256, 256.0, 256.0)
Output  Size: 32768.00KB at DDR

feature UB3->layer1->ResnetBlock2D->sample conv1[OPCONV_output] is stored in DDR, doesn't need remove form GM
create feature UB3->layer1->ResnetBlock2D->shortcut conv[OPCONV_output] w/ 32.00MB at DDR
---> running UB3->layer1->ResnetBlock2D->shortcut conv <---
Input  Shape: (1, 512, 256.0, 256.0)
Input   Size: 65536.00KB at DDR
Kernel Shape: (256, 512, 1, 1, 1, 1)
Kernel  Size: 256.00KB at DDR
MAC time = 2097.15us, ldst time = 3133.14us
Output Shape: (1, 256, 256.0, 256.0)
Output  Size: 32768.00KB at DDR

feature UB2->Upsample2DUpsample2D[OPCONV_output] is stored in DDR, doesn't need remove form GM
create feature UB3->layer1->ResnetBlock2D->sample res add w/ 32.00MB at DDR
feature UB3->layer1->ResnetBlock2D->shortcut conv[OPCONV_output] is stored in DDR, doesn't need remove form GM
feature UB3->layer1->ResnetBlock2D->sample conv2[OPCONV_output] is stored in DDR, doesn't need remove form GM
create feature UB3->layer2->ResnetBlock2D->sample conv1[OPCONV_output] w/ 32.00MB at DDR
---> running UB3->layer2->ResnetBlock2D->sample conv1 <---
Input  Shape: (1, 256, 256.0, 256.0)
Input   Size: 32768.00KB at DDR
Kernel Shape: (256, 256, 3, 3, 1, 1)
Kernel  Size: 1152.00KB at DDR
MAC time = 9437.18us, ldst time = 2119.95us
Output Shape: (1, 256, 256.0, 256.0)
Output  Size: 32768.00KB at DDR

create feature UB3->layer2->ResnetBlock2D->sample conv2[OPCONV_output] w/ 32.00MB at DDR
---> running UB3->layer2->ResnetBlock2D->sample conv2 <---
Input  Shape: (1, 256, 256.0, 256.0)
Input   Size: 32768.00KB at DDR
Kernel Shape: (256, 256, 3, 3, 1, 1)
Kernel  Size: 1152.00KB at DDR
MAC time = 9437.18us, ldst time = 2119.95us
Output Shape: (1, 256, 256.0, 256.0)
Output  Size: 32768.00KB at DDR

feature UB3->layer2->ResnetBlock2D->sample conv1[OPCONV_output] is stored in DDR, doesn't need remove form GM
create feature UB3->layer2->ResnetBlock2D->sample res add w/ 32.00MB at DDR
feature UB3->layer1->ResnetBlock2D->sample res add is stored in DDR, doesn't need remove form GM
feature UB3->layer2->ResnetBlock2D->sample conv2[OPCONV_output] is stored in DDR, doesn't need remove form GM
create feature UB3->layer3->ResnetBlock2D->sample conv1[OPCONV_output] w/ 32.00MB at DDR
---> running UB3->layer3->ResnetBlock2D->sample conv1 <---
Input  Shape: (1, 256, 256.0, 256.0)
Input   Size: 32768.00KB at DDR
Kernel Shape: (256, 256, 3, 3, 1, 1)
Kernel  Size: 1152.00KB at DDR
MAC time = 9437.18us, ldst time = 2119.95us
Output Shape: (1, 256, 256.0, 256.0)
Output  Size: 32768.00KB at DDR

create feature UB3->layer3->ResnetBlock2D->sample conv2[OPCONV_output] w/ 32.00MB at DDR
---> running UB3->layer3->ResnetBlock2D->sample conv2 <---
Input  Shape: (1, 256, 256.0, 256.0)
Input   Size: 32768.00KB at DDR
Kernel Shape: (256, 256, 3, 3, 1, 1)
Kernel  Size: 1152.00KB at DDR
MAC time = 9437.18us, ldst time = 2119.95us
Output Shape: (1, 256, 256.0, 256.0)
Output  Size: 32768.00KB at DDR

feature UB3->layer3->ResnetBlock2D->sample conv1[OPCONV_output] is stored in DDR, doesn't need remove form GM
create feature UB3->layer3->ResnetBlock2D->sample res add w/ 32.00MB at DDR
feature UB3->layer2->ResnetBlock2D->sample res add is stored in DDR, doesn't need remove form GM
feature UB3->layer3->ResnetBlock2D->sample conv2[OPCONV_output] is stored in DDR, doesn't need remove form GM
create feature UB3->Upsample2Dupinput w/ 128.00MB at DDR
feature UB3->layer3->ResnetBlock2D->sample res add is stored in DDR, doesn't need remove form GM
create feature UB3->Upsample2DUpsample2D[OPCONV_output] w/ 128.00MB at DDR
---> running UB3->Upsample2DUpsample2D <---
Input  Shape: (1, 256, 512.0, 512.0)
Input   Size: 131072.00KB at DDR
Kernel Shape: (256, 256, 3, 3, 1, 1)
Kernel  Size: 1152.00KB at DDR
MAC time = 37748.74us, ldst time = 8369.95us
Output Shape: (1, 256, 512.0, 512.0)
Output  Size: 131072.00KB at DDR

feature UB3->Upsample2Dupinput is stored in DDR, doesn't need remove form GM
create feature UB4->layer1->ResnetBlock2D->sample conv1[OPCONV_output] w/ 64.00MB at DDR
---> running UB4->layer1->ResnetBlock2D->sample conv1 <---
Input  Shape: (1, 256, 512.0, 512.0)
Input   Size: 131072.00KB at DDR
Kernel Shape: (128, 256, 3, 3, 1, 1)
Kernel  Size: 576.00KB at DDR
MAC time = 18874.37us, ldst time = 6268.31us
Output Shape: (1, 128, 512.0, 512.0)
Output  Size: 65536.00KB at DDR

create feature UB4->layer1->ResnetBlock2D->sample conv2[OPCONV_output] w/ 64.00MB at DDR
---> running UB4->layer1->ResnetBlock2D->sample conv2 <---
Input  Shape: (1, 128, 512.0, 512.0)
Input   Size: 65536.00KB at DDR
Kernel Shape: (128, 128, 3, 3, 1, 1)
Kernel  Size: 288.00KB at DDR
MAC time = 9437.18us, ldst time = 4175.82us
Output Shape: (1, 128, 512.0, 512.0)
Output  Size: 65536.00KB at DDR

feature UB4->layer1->ResnetBlock2D->sample conv1[OPCONV_output] is stored in DDR, doesn't need remove form GM
create feature UB4->layer1->ResnetBlock2D->shortcut conv[OPCONV_output] w/ 64.00MB at DDR
---> running UB4->layer1->ResnetBlock2D->shortcut conv <---
Input  Shape: (1, 256, 512.0, 512.0)
Input   Size: 131072.00KB at DDR
Kernel Shape: (128, 256, 1, 1, 1, 1)
Kernel  Size: 64.00KB at DDR
MAC time = 2097.15us, ldst time = 6252.03us
Output Shape: (1, 128, 512.0, 512.0)
Output  Size: 65536.00KB at DDR

feature UB3->Upsample2DUpsample2D[OPCONV_output] is stored in DDR, doesn't need remove form GM
create feature UB4->layer1->ResnetBlock2D->sample res add w/ 64.00MB at DDR
feature UB4->layer1->ResnetBlock2D->shortcut conv[OPCONV_output] is stored in DDR, doesn't need remove form GM
feature UB4->layer1->ResnetBlock2D->sample conv2[OPCONV_output] is stored in DDR, doesn't need remove form GM
create feature UB4->layer2->ResnetBlock2D->sample conv1[OPCONV_output] w/ 64.00MB at DDR
---> running UB4->layer2->ResnetBlock2D->sample conv1 <---
Input  Shape: (1, 128, 512.0, 512.0)
Input   Size: 65536.00KB at DDR
Kernel Shape: (128, 128, 3, 3, 1, 1)
Kernel  Size: 288.00KB at DDR
MAC time = 9437.18us, ldst time = 4175.82us
Output Shape: (1, 128, 512.0, 512.0)
Output  Size: 65536.00KB at DDR

create feature UB4->layer2->ResnetBlock2D->sample conv2[OPCONV_output] w/ 64.00MB at DDR
---> running UB4->layer2->ResnetBlock2D->sample conv2 <---
Input  Shape: (1, 128, 512.0, 512.0)
Input   Size: 65536.00KB at DDR
Kernel Shape: (128, 128, 3, 3, 1, 1)
Kernel  Size: 288.00KB at DDR
MAC time = 9437.18us, ldst time = 4175.82us
Output Shape: (1, 128, 512.0, 512.0)
Output  Size: 65536.00KB at DDR

feature UB4->layer2->ResnetBlock2D->sample conv1[OPCONV_output] is stored in DDR, doesn't need remove form GM
create feature UB4->layer2->ResnetBlock2D->sample res add w/ 64.00MB at DDR
feature UB4->layer1->ResnetBlock2D->sample res add is stored in DDR, doesn't need remove form GM
feature UB4->layer2->ResnetBlock2D->sample conv2[OPCONV_output] is stored in DDR, doesn't need remove form GM
create feature UB4->layer3->ResnetBlock2D->sample conv1[OPCONV_output] w/ 64.00MB at DDR
---> running UB4->layer3->ResnetBlock2D->sample conv1 <---
Input  Shape: (1, 128, 512.0, 512.0)
Input   Size: 65536.00KB at DDR
Kernel Shape: (128, 128, 3, 3, 1, 1)
Kernel  Size: 288.00KB at DDR
MAC time = 9437.18us, ldst time = 4175.82us
Output Shape: (1, 128, 512.0, 512.0)
Output  Size: 65536.00KB at DDR

create feature UB4->layer3->ResnetBlock2D->sample conv2[OPCONV_output] w/ 64.00MB at DDR
---> running UB4->layer3->ResnetBlock2D->sample conv2 <---
Input  Shape: (1, 128, 512.0, 512.0)
Input   Size: 65536.00KB at DDR
Kernel Shape: (128, 128, 3, 3, 1, 1)
Kernel  Size: 288.00KB at DDR
MAC time = 9437.18us, ldst time = 4175.82us
Output Shape: (1, 128, 512.0, 512.0)
Output  Size: 65536.00KB at DDR

feature UB4->layer3->ResnetBlock2D->sample conv1[OPCONV_output] is stored in DDR, doesn't need remove form GM
create feature UB4->layer3->ResnetBlock2D->sample res add w/ 64.00MB at DDR
feature UB4->layer2->ResnetBlock2D->sample res add is stored in DDR, doesn't need remove form GM
feature UB4->layer3->ResnetBlock2D->sample conv2[OPCONV_output] is stored in DDR, doesn't need remove form GM
create feature conv_out[OPCONV_output] w/ 1.50MB at DDR
---> running conv_out <---
Input  Shape: (1, 128, 512.0, 512.0)
Input   Size: 65536.00KB at DDR
Kernel Shape: (3, 128, 3, 3, 1, 1)
Kernel  Size: 6.75KB at DDR
MAC time = 1179.65us, ldst time = 2132.38us
Output Shape: (1, 3, 512.0, 512.0)
Output  Size: 1536.00KB at DDR

--------------------> summar VAE Decoder perf data <--------------------
post_quant_conv, (1, 4, 64.0, 64.0) conv2D (4, 4, 1, 1, 1, 1) to (1, 4, 64.0, 64.0) ldst=1.02us, mac=0.13us, bottleneck is ldst
conv_in, (1, 4, 64.0, 64.0) conv2D (512, 4, 3, 3, 1, 1) to (1, 512, 64.0, 64.0) ldst=131.35us, mac=36.86us, bottleneck is ldst
Mid->layer1->ResnetBlock2D->sample conv1, (1, 512, 64.0, 64.0) conv2D (512, 512, 3, 3, 1, 1) to (1, 512, 64.0, 64.0) ldst=276.69us, mac=2359.30us, bottleneck is mac
Mid->layer1->ResnetBlock2D->sample conv2, (1, 512, 64.0, 64.0) conv2D (512, 512, 3, 3, 1, 1) to (1, 512, 64.0, 64.0) ldst=276.69us, mac=2359.30us, bottleneck is mac
MidAttn->selfattn_q, (1, 4096.0, 512) Linear (512, 512) to (1, 4096.0, 512) ldst=146.48us, mac=0.00us, bottleneck is ldst
MidAttn->selfattn_k, (1, 4096.0, 512) Linear (512, 512) to (1, 4096.0, 512) ldst=276.69us, mac=0.00us, bottleneck is ldst
MidAttn->selfattn_v, (1, 4096.0, 512) Linear (512, 512) to (1, 4096.0, 512) ldst=146.48us, mac=0.00us, bottleneck is ldst
MidAttn->setfattn_qkt, (1, 4096.0, 512) bmm (1, 512, 4096.0) to (1, 4096.0, 4096.0) ldst=1171.88us, mac=0.00us, bottleneck is ldst
MidAttn->selfattn_score, (1, 4096.0, 4096.0) bmm (1, 4096.0, 512) to (1, 4096.0, 512) ldst=1171.88us, mac=0.00us, bottleneck is ldst
MidAttn->selfattn_o, (1, 4096.0, 512) Linear (512, 512) to (1, 4096.0, 512) ldst=146.48us, mac=0.00us, bottleneck is ldst
Mid->layer2->ResnetBlock2D->sample conv1, (1, 512, 64.0, 64.0) conv2D (512, 512, 3, 3, 1, 1) to (1, 512, 64.0, 64.0) ldst=276.69us, mac=2359.30us, bottleneck is mac
Mid->layer2->ResnetBlock2D->sample conv2, (1, 512, 64.0, 64.0) conv2D (512, 512, 3, 3, 1, 1) to (1, 512, 64.0, 64.0) ldst=276.69us, mac=2359.30us, bottleneck is mac
UB1->layer1->ResnetBlock2D->sample conv1, (1, 512, 64.0, 64.0) conv2D (512, 512, 3, 3, 1, 1) to (1, 512, 64.0, 64.0) ldst=276.69us, mac=2359.30us, bottleneck is mac
UB1->layer1->ResnetBlock2D->sample conv2, (1, 512, 64.0, 64.0) conv2D (512, 512, 3, 3, 1, 1) to (1, 512, 64.0, 64.0) ldst=406.90us, mac=2359.30us, bottleneck is mac
UB1->layer2->ResnetBlock2D->sample conv1, (1, 512, 64.0, 64.0) conv2D (512, 512, 3, 3, 1, 1) to (1, 512, 64.0, 64.0) ldst=276.69us, mac=2359.30us, bottleneck is mac
UB1->layer2->ResnetBlock2D->sample conv2, (1, 512, 64.0, 64.0) conv2D (512, 512, 3, 3, 1, 1) to (1, 512, 64.0, 64.0) ldst=276.69us, mac=2359.30us, bottleneck is mac
UB1->layer3->ResnetBlock2D->sample conv1, (1, 512, 64.0, 64.0) conv2D (512, 512, 3, 3, 1, 1) to (1, 512, 64.0, 64.0) ldst=276.69us, mac=2359.30us, bottleneck is mac
UB1->layer3->ResnetBlock2D->sample conv2, (1, 512, 64.0, 64.0) conv2D (512, 512, 3, 3, 1, 1) to (1, 512, 64.0, 64.0) ldst=406.90us, mac=2359.30us, bottleneck is mac
UB1->Upsample2DUpsample2D, (1, 512, 128.0, 128.0) conv2D (512, 512, 3, 3, 1, 1) to (1, 512, 128.0, 128.0) ldst=1188.15us, mac=9437.18us, bottleneck is mac
UB2->layer1->ResnetBlock2D->sample conv1, (1, 512, 128.0, 128.0) conv2D (512, 512, 3, 3, 1, 1) to (1, 512, 128.0, 128.0) ldst=1188.15us, mac=9437.18us, bottleneck is mac
UB2->layer1->ResnetBlock2D->sample conv2, (1, 512, 128.0, 128.0) conv2D (512, 512, 3, 3, 1, 1) to (1, 512, 128.0, 128.0) ldst=1188.15us, mac=9437.18us, bottleneck is mac
UB2->layer2->ResnetBlock2D->sample conv1, (1, 512, 128.0, 128.0) conv2D (512, 512, 3, 3, 1, 1) to (1, 512, 128.0, 128.0) ldst=1188.15us, mac=9437.18us, bottleneck is mac
UB2->layer2->ResnetBlock2D->sample conv2, (1, 512, 128.0, 128.0) conv2D (512, 512, 3, 3, 1, 1) to (1, 512, 128.0, 128.0) ldst=1188.15us, mac=9437.18us, bottleneck is mac
UB2->layer3->ResnetBlock2D->sample conv1, (1, 512, 128.0, 128.0) conv2D (512, 512, 3, 3, 1, 1) to (1, 512, 128.0, 128.0) ldst=1188.15us, mac=9437.18us, bottleneck is mac
UB2->layer3->ResnetBlock2D->sample conv2, (1, 512, 128.0, 128.0) conv2D (512, 512, 3, 3, 1, 1) to (1, 512, 128.0, 128.0) ldst=1188.15us, mac=9437.18us, bottleneck is mac
UB2->Upsample2DUpsample2D, (1, 512, 256.0, 256.0) conv2D (512, 512, 3, 3, 1, 1) to (1, 512, 256.0, 256.0) ldst=4313.15us, mac=37748.74us, bottleneck is mac
UB3->layer1->ResnetBlock2D->sample conv1, (1, 512, 256.0, 256.0) conv2D (256, 512, 3, 3, 1, 1) to (1, 256, 256.0, 256.0) ldst=3198.24us, mac=18874.37us, bottleneck is mac
UB3->layer1->ResnetBlock2D->sample conv2, (1, 256, 256.0, 256.0) conv2D (256, 256, 3, 3, 1, 1) to (1, 256, 256.0, 256.0) ldst=2119.95us, mac=9437.18us, bottleneck is mac
UB3->layer1->ResnetBlock2D->shortcut conv, (1, 512, 256.0, 256.0) conv2D (256, 512, 1, 1, 1, 1) to (1, 256, 256.0, 256.0) ldst=3133.14us, mac=2097.15us, bottleneck is ldst
UB3->layer2->ResnetBlock2D->sample conv1, (1, 256, 256.0, 256.0) conv2D (256, 256, 3, 3, 1, 1) to (1, 256, 256.0, 256.0) ldst=2119.95us, mac=9437.18us, bottleneck is mac
UB3->layer2->ResnetBlock2D->sample conv2, (1, 256, 256.0, 256.0) conv2D (256, 256, 3, 3, 1, 1) to (1, 256, 256.0, 256.0) ldst=2119.95us, mac=9437.18us, bottleneck is mac
UB3->layer3->ResnetBlock2D->sample conv1, (1, 256, 256.0, 256.0) conv2D (256, 256, 3, 3, 1, 1) to (1, 256, 256.0, 256.0) ldst=2119.95us, mac=9437.18us, bottleneck is mac
UB3->layer3->ResnetBlock2D->sample conv2, (1, 256, 256.0, 256.0) conv2D (256, 256, 3, 3, 1, 1) to (1, 256, 256.0, 256.0) ldst=2119.95us, mac=9437.18us, bottleneck is mac
UB3->Upsample2DUpsample2D, (1, 256, 512.0, 512.0) conv2D (256, 256, 3, 3, 1, 1) to (1, 256, 512.0, 512.0) ldst=8369.95us, mac=37748.74us, bottleneck is mac
UB4->layer1->ResnetBlock2D->sample conv1, (1, 256, 512.0, 512.0) conv2D (128, 256, 3, 3, 1, 1) to (1, 128, 512.0, 512.0) ldst=6268.31us, mac=18874.37us, bottleneck is mac
UB4->layer1->ResnetBlock2D->sample conv2, (1, 128, 512.0, 512.0) conv2D (128, 128, 3, 3, 1, 1) to (1, 128, 512.0, 512.0) ldst=4175.82us, mac=9437.18us, bottleneck is mac
UB4->layer1->ResnetBlock2D->shortcut conv, (1, 256, 512.0, 512.0) conv2D (128, 256, 1, 1, 1, 1) to (1, 128, 512.0, 512.0) ldst=6252.03us, mac=2097.15us, bottleneck is ldst
UB4->layer2->ResnetBlock2D->sample conv1, (1, 128, 512.0, 512.0) conv2D (128, 128, 3, 3, 1, 1) to (1, 128, 512.0, 512.0) ldst=4175.82us, mac=9437.18us, bottleneck is mac
UB4->layer2->ResnetBlock2D->sample conv2, (1, 128, 512.0, 512.0) conv2D (128, 128, 3, 3, 1, 1) to (1, 128, 512.0, 512.0) ldst=4175.82us, mac=9437.18us, bottleneck is mac
UB4->layer3->ResnetBlock2D->sample conv1, (1, 128, 512.0, 512.0) conv2D (128, 128, 3, 3, 1, 1) to (1, 128, 512.0, 512.0) ldst=4175.82us, mac=9437.18us, bottleneck is mac
UB4->layer3->ResnetBlock2D->sample conv2, (1, 128, 512.0, 512.0) conv2D (128, 128, 3, 3, 1, 1) to (1, 128, 512.0, 512.0) ldst=4175.82us, mac=9437.18us, bottleneck is mac
conv_out, (1, 128, 512.0, 512.0) conv2D (3, 128, 3, 3, 1, 1) to (1, 3, 512.0, 512.0) ldst=2132.38us, mac=1179.65us, bottleneck is ldst
*************************************************************************
*** perf model, 2core, 1cluster, 30GB/s BW, 4MB GM, 512x512 img size, 1 batch, FP16 precision
*** [VAE Decoder]: ignore activation func (layernorm, groupnorm, silu,etc), eltwise and reshape
*** total valid mac is 1.257TMACS
*** total 42 ops, conv 36, bmm 2, linear 4
*** bound at computer(MAC) is 31 ops. cost 297.27ms(95.29%)
*** bound at memory(ldst) is 11 ops w/ (2 are bmm, 4 are linear, 5 are conv), cost 14.71ms
*** total time cost is 311.98ms, comptime 302.68ms(97.02%), memtime 79.68ms(25.54%).
*************************************************************************
